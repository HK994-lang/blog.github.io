<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简单的2D枪战游戏</title>
    <style>
        /* style.css 内容开始 */
        body {
            margin: 0;
            overflow: hidden; /* 防止滚动条 */
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #game-container {
            width: 800px; /* 游戏区域宽度 */
            height: 600px; /* 游戏区域高度 */
            background-color: #555;
            position: relative; /* 允许子元素定位 */
            border: 2px solid #fff;
            overflow: hidden; /* 隐藏超出边界的子弹 */
        }

        #player {
            width: 50px;
            height: 50px;
            background-color: dodgerblue;
            position: absolute;
            bottom: 20px; /* 初始位置在底部 */
            left: calc(50% - 25px); /* 初始位置居中 */
            border-radius: 5px;
        }

        .bullet {
            width: 10px;
            height: 20px;
            background-color: yellow;
            position: absolute;
            border-radius: 2px;
        }
        /* style.css 内容结束 */
    </style>
</head>
<body>
    <div id="game-container">
        <div id="player"></div>
        </div>

    <script>
        /* script.js 内容开始 */
        const gameContainer = document.getElementById('game-container');
        const player = document.getElementById('player');

        const playerSpeed = 5; // 玩家移动速度
        const bulletSpeed = 10; // 子弹速度

        let playerX = gameContainer.offsetWidth / 2 - player.offsetWidth / 2;
        let playerY = gameContainer.offsetHeight - player.offsetHeight - 20;

        let keysPressed = {}; // 存储按下的键

        // 初始化玩家位置
        player.style.left = `${playerX}px`;
        player.style.top = `${playerY}px`;

        document.addEventListener('keydown', (e) => {
            keysPressed[e.key] = true;
        });

        document.addEventListener('keyup', (e) => {
            keysPressed[e.key] = false;
        });

        function handlePlayerMovement() {
            if (keysPressed['ArrowLeft'] || keysPressed['a']) {
                playerX -= playerSpeed;
            }
            if (keysPressed['ArrowRight'] || keysPressed['d']) {
                playerX += playerSpeed;
            }
            if (keysPressed['ArrowUp'] || keysPressed['w']) {
                playerY -= playerSpeed;
            }
            if (keysPressed['ArrowDown'] || keysPressed['s']) {
                playerY += playerSpeed;
            }

            // 限制玩家在游戏区域内
            playerX = Math.max(0, Math.min(playerX, gameContainer.offsetWidth - player.offsetWidth));
            playerY = Math.max(0, Math.min(playerY, gameContainer.offsetHeight - player.offsetHeight));

            player.style.left = `${playerX}px`;
            player.style.top = `${playerY}px`;
        }

        function createBullet() {
            const bullet = document.createElement('div');
            bullet.classList.add('bullet');
            bullet.style.left = `${playerX + player.offsetWidth / 2 - bullet.offsetWidth / 2}px`;
            bullet.style.top = `${playerY - bullet.offsetHeight}px`; // 从玩家上方发射
            gameContainer.appendChild(bullet);

            let bulletInterval = setInterval(() => {
                let bulletTop = parseInt(bullet.style.top) - bulletSpeed;
                bullet.style.top = `${bulletTop}px`;

                // 移除超出边界的子弹
                if (bulletTop < 0) {
                    clearInterval(bulletInterval);
                    bullet.remove();
                }
            }, 1000 / 60); // 每秒60帧
        }

        document.addEventListener('keypress', (e) => {
            if (e.key === ' ' || e.key === 'Spacebar') { // 按空格键发射子弹
                createBullet();
            }
        });

        // 游戏主循环
        function gameLoop() {
            handlePlayerMovement();
            requestAnimationFrame(gameLoop);
        }

        gameLoop(); // 启动游戏
        /* script.js 内容结束 */
    </script>
</body>
</html>
